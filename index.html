import React, { useState, useEffect } from 'react';
import { 
  Menu, X, CheckCircle, ArrowRight, Zap, 
  Clock, TrendingUp, Layers, MessageSquare, 
  BarChart3, ShieldCheck, ChevronRight, Play
} from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';

// --- Componentes de UI Reutiliz√°veis ---

const Section = ({ id, className, children }) => (
  <section id={id} className={`py-20 md:py-32 relative overflow-hidden ${className}`}>
    {children}
  </section>
);

const GradientText = ({ children, className = "" }) => (
  <span className={`bg-clip-text text-transparent bg-gradient-to-r from-rose-400 via-fuchsia-500 to-indigo-500 ${className}`}>
    {children}
  </span>
);

const Button = ({ children, variant = 'primary', href, className = "", icon: Icon }) => {
  const baseStyle = "group relative inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full font-bold transition-all duration-300 transform hover:-translate-y-1";
  const variants = {
    primary: "bg-rose-600 hover:bg-rose-500 text-white shadow-[0_0_20px_rgba(225,29,72,0.5)] hover:shadow-[0_0_30px_rgba(225,29,72,0.7)]",
    secondary: "bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md text-white hover:border-rose-500/50",
    outline: "border-2 border-rose-600 text-rose-500 hover:bg-rose-600 hover:text-white"
  };

  return (
    <a href={href} className={`${baseStyle} ${variants[variant]} ${className}`}>
      {children}
      {Icon && <Icon size={20} className="transition-transform group-hover:translate-x-1" />}
    </a>
  );
};

const Card = ({ children, className = "", delay = 0 }) => (
  <motion.div 
    initial={{ opacity: 0, y: 30 }}
    whileInView={{ opacity: 1, y: 0 }}
    viewport={{ once: true, margin: "-50px" }}
    transition={{ duration: 0.5, delay }}
    className={`bg-slate-900/50 backdrop-blur-xl border border-white/10 p-8 rounded-3xl hover:border-rose-500/30 hover:bg-slate-800/50 transition-colors duration-300 ${className}`}
  >
    {children}
  </motion.div>
);

// --- Componente Principal ---

export default function NCodesLanding() {
  const [isScrolled, setIsScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => setIsScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const navLinks = [
    { name: "O Problema", href: "#problema" },
    { name: "Quem Somos", href: "#sobre" },
    { name: "Resultados", href: "#resultados" },
    { name: "Solu√ß√µes", href: "#solucoes" },
    { name: "Como Funciona", href: "#processo" },
  ];

  return (
    <div className="min-h-screen bg-slate-950 text-slate-50 selection:bg-rose-500/30 font-sans">
      
      {/* Background Glow Effects */}
      <div className="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div className="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-rose-600/20 rounded-full blur-[120px] opacity-50 animate-pulse" />
        <div className="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-indigo-600/20 rounded-full blur-[120px] opacity-50" />
      </div>

      {/* Navbar */}
      <nav className={`fixed top-0 w-full z-50 transition-all duration-500 ${isScrolled ? 'bg-slate-950/80 backdrop-blur-md py-4 border-b border-white/5' : 'py-6 bg-transparent'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="text-2xl font-bold tracking-tighter">
            N<span className="text-rose-500">Codes</span>
          </div>

          {/* Desktop Menu */}
          <div className="hidden md:flex items-center gap-8">
            {navLinks.map(link => (
              <a key={link.name} href={link.href} className="text-sm font-medium text-slate-300 hover:text-white transition-colors">
                {link.name}
              </a>
            ))}
            <Button href="https://wa.me/5531975285780" className="!px-6 !py-2 !text-sm">
              Diagn√≥stico Gr√°tis
            </Button>
          </div>

          {/* Mobile Toggle */}
          <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="md:hidden p-2 text-slate-300">
            {mobileMenuOpen ? <X /> : <Menu />}
          </button>
        </div>
      </nav>

      {/* Mobile Menu Overlay */}
      <AnimatePresence>
        {mobileMenuOpen && (
          <motion.div 
            initial={{ opacity: 0, x: '100%' }}
            animate={{ opacity: 1, x: 0 }}
            exit={{ opacity: 0, x: '100%' }}
            className="fixed inset-0 z-40 bg-slate-950/95 backdrop-blur-xl pt-24 px-6 md:hidden"
          >
            <div className="flex flex-col gap-6 text-center">
              {navLinks.map(link => (
                <a 
                  key={link.name} 
                  href={link.href} 
                  onClick={() => setMobileMenuOpen(false)}
                  className="text-2xl font-semibold text-slate-200"
                >
                  {link.name}
                </a>
              ))}
              <Button href="https://wa.me/5531975285780" className="mt-4">Diagn√≥stico Gr√°tis</Button>
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Hero Section */}
      <Section className="min-h-screen flex items-center pt-32">
        <div className="container mx-auto px-6 relative z-10">
          <div className="max-w-4xl mx-auto text-center">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 0.6 }}
            >
              <span className="inline-block py-1 px-3 rounded-full bg-rose-500/10 border border-rose-500/20 text-rose-400 text-sm font-medium mb-6">
                üöÄ Automatize seu neg√≥cio em 15 dias
              </span>
              <h1 className="text-5xl md:text-7xl font-extrabold leading-tight mb-8 tracking-tight">
                Seu sistema est√° <br className="hidden md:block"/>
                <GradientText>travando seu crescimento?</GradientText>
              </h1>
              <p className="text-lg md:text-xl text-slate-400 mb-10 max-w-2xl mx-auto leading-relaxed">
                Pare de perder vendas com processos manuais e planilhas. N√≥s criamos ecossistemas digitais que trabalham enquanto voc√™ dorme.
              </p>
              <div className="flex flex-col sm:flex-row justify-center gap-4">
                <Button href="https://wa.me/5531975285780" variant="primary" icon={Zap}>
                  Diagn√≥stico Gratuito
                </Button>
                <Button href="#resultados" variant="secondary" icon={Play}>
                  Ver Resultados
                </Button>
              </div>
            </motion.div>

            {/* Trust Badges */}
            <motion.div 
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ delay: 0.5, duration: 1 }}
              className="mt-16 pt-8 border-t border-white/5 flex flex-wrap justify-center gap-8 md:gap-16 opacity-70 grayscale hover:grayscale-0 transition-all duration-500"
            >
              {[
                { icon: CheckCircle, text: "Garantia de Resultado" },
                { icon: Clock, text: "Implementa√ß√£o R√°pida" },
                { icon: ShieldCheck, text: "Suporte Vital√≠cio" }
              ].map((badge, idx) => (
                <div key={idx} className="flex items-center gap-2 text-slate-400">
                  <badge.icon className="text-rose-500" size={18} />
                  <span className="text-sm font-medium">{badge.text}</span>
                </div>
              ))}
            </motion.div>
          </div>
        </div>
      </Section>

      {/* Pain Points Section */}
      <Section id="problema" className="bg-slate-900/30">
        <div className="container mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-4xl font-bold mb-4">Reconhece algum desses <GradientText>pesadelos?</GradientText></h2>
            <p className="text-slate-400">Cada "sim" √© dinheiro saindo do seu bolso.</p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {[
              { icon: TrendingUp, title: "Perdendo Vendas", desc: "Leads chegam mas voc√™ n√£o consegue atender todos rapidamente?" },
              { icon: Layers, title: "Trabalho Manual", desc: "Sua equipe gasta horas copiando dados entre planilhas e sistemas?" },
              { icon: BarChart3, title: "Sem Visibilidade", desc: "Toma decis√µes no escuro sem saber seus n√∫meros reais?" },
              { icon: Zap, title: "Sistemas Isolados", desc: "Cada ferramenta funciona sozinha e nada conversa entre si?" },
              { icon: MessageSquare, title: "Clientes Irritados", desc: "Demora no atendimento est√° queimando sua reputa√ß√£o?" },
              { icon: ShieldCheck, title: "Crescimento Travado", desc: "Quer escalar mas o operacional atual n√£o aguenta?" },
            ].map((item, idx) => (
              <Card key={idx} delay={idx * 0.1} className="group">
                <div className="w-12 h-12 bg-rose-500/10 rounded-xl flex items-center justify-center text-rose-500 mb-6 group-hover:scale-110 transition-transform duration-300">
                  <item.icon size={24} />
                </div>
                <h3 className="text-xl font-bold mb-3">{item.title}</h3>
                <p className="text-slate-400 text-sm leading-relaxed">{item.desc}</p>
              </Card>
            ))}
          </div>
        </div>
      </Section>

      {/* About/Story Section */}
      <Section id="sobre">
        <div className="container mx-auto px-6">
          <div className="grid md:grid-cols-2 gap-16 items-center">
            <motion.div 
              initial={{ opacity: 0, x: -50 }}
              whileInView={{ opacity: 1, x: 0 }}
              viewport={{ once: true }}
              className="relative"
            >
              <div className="absolute inset-0 bg-rose-500 rounded-3xl blur-2xl opacity-20 transform rotate-6"></div>
              <img 
                src="https://a1c447345653bf343ff8d48291913333.cdn.bubble.io/f1757415698267x999496160429774300/WhatsApp%20Image%202025-09-09%20at%2007.55.40.jpeg?_gl=1*3uma87*_gcl_au*MTE5OTc0NzQxMS4xNzU2OTAzODc5*_ga*ODQ1NzA3MTQ5LjE3NDQyODk2MjE.*_ga_BFPVR2DEE2*czE3NTc0MTU2NTgkbzM3JGcxJHQxNzU3NDQ4NjAzJGozNiRsMCRoMA.." 
                alt="Rodrigo Vale" 
                className="relative rounded-3xl w-full shadow-2xl border border-white/10"
              />
              <div className="absolute -bottom-6 -right-6 bg-slate-800 p-6 rounded-2xl border border-white/10 shadow-xl max-w-xs hidden md:block">
                <p className="text-rose-400 font-bold text-lg">"N√£o vendemos tecnologia. Vendemos tempo."</p>
              </div>
            </motion.div>
            
            <motion.div
              initial={{ opacity: 0, x: 50 }}
              whileInView={{ opacity: 1, x: 0 }}
              viewport={{ once: true }}
            >
              <h2 className="text-3xl md:text-5xl font-bold mb-6">Entendo sua <GradientText>frustra√ß√£o</GradientText></h2>
              <div className="space-y-6 text-slate-300 text-lg leading-relaxed">
                <p>
                  <strong>Oi, eu sou Rodrigo Vale.</strong> Por anos vi empres√°rios brilhantes enterrados em burocracia, usando sistemas caros que n√£o resolviam nada.
                </p>
                <div className="pl-6 border-l-4 border-rose-500 bg-rose-500/5 py-4 pr-4 rounded-r-lg">
                  <p className="italic text-white font-medium">"87% das empresas usam a tecnologia ERRADA para seus problemas."</p>
                </div>
                <p>
                  Por isso criei a NCodes. Libertamos empresas do caos tecnol√≥gico. Em 15 dias, transformamos sua opera√ß√£o em uma m√°quina de vendas eficiente.
                </p>
                <div className="pt-4">
                  <a href="#resultados" className="text-rose-400 hover:text-rose-300 font-bold inline-flex items-center gap-2 hover:gap-4 transition-all">
                    Ver resultados reais <ArrowRight size={18} />
                  </a>
                </div>
              </div>
            </motion.div>
          </div>
        </div>
      </Section>

      {/* Stats Section */}
      <Section id="resultados" className="bg-slate-900/50 border-y border-white/5">
        <div className="container mx-auto px-6">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
            {[
              { number: "R$ 500k+", label: "Economia Mensal", desc: "Em automa√ß√£o" },
              { number: "3.5x", label: "Mais Vendas", desc: "Em 90 dias" },
              { number: "15 dias", label: "Implementa√ß√£o", desc: "Do zero ao fim" },
              { number: "24/7", label: "Atendimento", desc: "Sem pausas" }
            ].map((stat, idx) => (
              <div key={idx} className="text-center group">
                <h3 className="text-4xl md:text-5xl font-black text-white mb-2 group-hover:text-rose-500 transition-colors">{stat.number}</h3>
                <p className="text-lg font-bold text-slate-200">{stat.label}</p>
                <p className="text-sm text-slate-500">{stat.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </Section>

      {/* Solutions Section */}
      <Section id="solucoes">
        <div className="container mx-auto px-6">
          <div className="text-center mb-20">
            <h2 className="text-3xl md:text-5xl font-bold mb-6">Escolha sua <GradientText>transforma√ß√£o</GradientText></h2>
            <p className="text-slate-400 max-w-2xl mx-auto">Resolvemos em 15 dias o que tira o seu sono hoje.</p>
          </div>

          <div className="grid md:grid-cols-2 gap-8">
            {[
              {
                tag: "+40% convers√£o",
                title: "Chatbot Inteligente 24/7",
                problem: "Perdendo vendas fora do hor√°rio?",
                solution: "IA que atende, qualifica e vende enquanto voc√™ dorme.",
                features: ["Responde em segundos", "Aprende sozinho", "WhatsApp + Site"],
                link: "Chatbot 24/7"
              },
              {
                tag: "6h/dia livres",
                title: "Automa√ß√£o Total",
                problem: "Equipe presa em trabalho manual?",
                solution: "Automatizamos tudo o que √© repetitivo. Foque no estrat√©gico.",
                features: ["Zero copiar/colar", "Relat√≥rios autom√°ticos", "Integra√ß√£o total"],
                link: "Automa√ß√£o"
              },
              {
                tag: "R$ 8k/m√™s economia",
                title: "Central √önica",
                problem: "Atendimento desorganizado?",
                solution: "Todos os canais em um lugar s√≥. M√©tricas em tempo real.",
                features: ["WhatsApp + Insta", "Distribui√ß√£o inteligente", "Dashboard completo"],
                link: "Central √önica"
              },
              {
                tag: "5x mais leads",
                title: "M√°quina de Vendas",
                problem: "Vendas estagnadas?",
                solution: "Sistema que prospecta e faz o follow-up no autom√°tico.",
                features: ["Prospec√ß√£o 24/7", "Nutri√ß√£o autom√°tica", "CRM integrado"],
                link: "Escalar Vendas"
              }
            ].map((card, idx) => (
              <Card key={idx} className="relative flex flex-col h-full border-white/5 hover:border-rose-500/40 group">
                <div className="absolute top-6 right-6 bg-emerald-500/10 text-emerald-400 px-3 py-1 rounded-full text-xs font-bold border border-emerald-500/20">
                  {card.tag}
                </div>
                <h3 className="text-2xl font-bold mb-2 group-hover:text-rose-400 transition-colors">{card.title}</h3>
                <div className="mb-6">
                  <p className="text-rose-400 text-sm font-medium mb-1">{card.problem}</p>
                  <p className="text-slate-300 text-sm">{card.solution}</p>
                </div>
                <ul className="space-y-3 mb-8 flex-grow">
                  {card.features.map((feat, i) => (
                    <li key={i} className="flex items-center gap-3 text-sm text-slate-400">
                      <div className="w-1.5 h-1.5 rounded-full bg-rose-500" />
                      {feat}
                    </li>
                  ))}
                </ul>
                <Button href={`https://wa.me/5531975285780?text=Tenho interesse em ${card.link}`} variant="secondary" className="w-full !justify-between group-hover:!bg-rose-600 group-hover:!border-rose-600 group-hover:text-white">
                  Quero esse resultado <ChevronRight size={16} />
                </Button>
              </Card>
            ))}
          </div>
        </div>
      </Section>

      {/* Process Section */}
      <Section id="processo" className="bg-slate-900/30">
        <div className="container mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-4xl font-bold">Como funciona?</h2>
            <p className="text-slate-400 mt-4">Simples, r√°pido e sem tecniqu√™s.</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-4 gap-8 relative">
            {/* Line connecting steps (Desktop only) */}
            <div className="hidden md:block absolute top-8 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-rose-500/30 to-transparent"></div>

            {[
              { step: "01", title: "Diagn√≥stico", desc: "30min no WhatsApp. Entendemos onde voc√™ perde dinheiro." },
              { step: "02", title: "Proposta", desc: "Em 24h: solu√ß√£o exata, prazo e garantia." },
              { step: "03", title: "Implementa√ß√£o", desc: "15 dias de constru√ß√£o. Voc√™ acompanha tudo." },
              { step: "04", title: "Liberdade", desc: "Entrega final + treinamento. Sua empresa rodando sozinha." }
            ].map((item, idx) => (
              <div key={idx} className="relative pt-8 text-center md:text-left">
                <div className="w-16 h-16 mx-auto md:mx-0 bg-slate-900 border border-rose-500 text-rose-500 rounded-2xl flex items-center justify-center text-xl font-bold mb-6 relative z-10 shadow-[0_0_20px_rgba(225,29,72,0.2)]">
                  {item.step}
                </div>
                <h3 className="text-xl font-bold mb-3">{item.title}</h3>
                <p className="text-sm text-slate-400">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </Section>

      {/* CTA Section */}
      <Section className="text-center !py-32">
        <div className="absolute inset-0 bg-gradient-to-b from-transparent to-rose-900/10 pointer-events-none"></div>
        <div className="container mx-auto px-6 relative z-10">
          <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-rose-500/10 border border-rose-500/20 text-rose-400 text-sm font-bold mb-8 animate-pulse">
            ‚ö†Ô∏è Apenas 3 vagas por m√™s
          </div>
          <h2 className="text-4xl md:text-6xl font-black mb-6">
            Seu concorrente j√° est√° <br/>
            <span className="text-rose-500">automatizando.</span>
          </h2>
          <p className="text-xl text-slate-400 mb-10 max-w-2xl mx-auto">
            Cada dia parado √© dinheiro na mesa. Garanta sua vaga e pare de ser ref√©m do operacional.
          </p>
          <div className="flex flex-col sm:flex-row justify-center gap-6">
            <Button href="https://wa.me/5531975285780?text=Quero garantir minha vaga" className="!text-lg !px-10 !py-5">
              Garantir Minha Vaga
            </Button>
          </div>
          <p className="mt-8 text-sm text-slate-500">
            ‚úÖ Diagn√≥stico gratuito &nbsp;&nbsp;‚Ä¢&nbsp;&nbsp; ‚úÖ Proposta em 24h &nbsp;&nbsp;‚Ä¢&nbsp;&nbsp; ‚úÖ Resultados garantidos
          </p>
        </div>
      </Section>

      {/* Footer */}
      <footer className="bg-slate-950 border-t border-white/10 pt-20 pb-10">
        <div className="container mx-auto px-6">
          <div className="grid md:grid-cols-4 gap-12 mb-16">
            <div className="col-span-1 md:col-span-2">
              <div className="text-2xl font-bold mb-6">N<span className="text-rose-500">Codes</span></div>
              <p className="text-slate-400 max-w-sm mb-6">
                Transformamos neg√≥cios ca√≥ticos em m√°quinas de vendas eficientes atrav√©s de automa√ß√£o e intelig√™ncia artificial.
              </p>
              <div className="flex gap-4">
                {/* Social Placeholders */}
                <div className="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center hover:bg-rose-500 transition-colors cursor-pointer text-white">
                  <MessageSquare size={20} />
                </div>
              </div>
            </div>
            
            <div>
              <h4 className="font-bold text-lg mb-6">Solu√ß√µes</h4>
              <ul className="space-y-4 text-slate-400 text-sm">
                <li><a href="#solucoes" className="hover:text-rose-500 transition-colors">Chatbot 24/7</a></li>
                <li><a href="#solucoes" className="hover:text-rose-500 transition-colors">Automa√ß√£o Total</a></li>
                <li><a href="#solucoes" className="hover:text-rose-500 transition-colors">CRM & Vendas</a></li>
              </ul>
            </div>

            <div>
              <h4 className="font-bold text-lg mb-6">Contato</h4>
              <ul className="space-y-4 text-slate-400 text-sm">
                <li className="flex items-center gap-2">
                  <div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                  <a href="https://wa.me/5531975285780" className="hover:text-white transition-colors">(31) 97528-5780</a>
                </li>
                <li>vale.nocode@gmail.com</li>
                <li>Par√° de Minas, MG</li>
              </ul>
            </div>
          </div>
          
          <div className="border-t border-white/5 pt-8 flex flex-col md:flex-row justify-between items-center text-slate-600 text-sm">
            <p>&copy; 2024 NCodes. Automatize hoje, domine amanh√£.</p>
            <div className="flex gap-6 mt-4 md:mt-0">
              <span>Termos</span>
              <span>Privacidade</span>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}
